////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var config = require("config");
var express = require('express');
var passport = require('passport');
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var viewController = require('../controllers/login/loginViewController');
var apiController = require('../controllers/login/loginApiController');
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
var router = express.Router();
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// View
router.get('/', viewController.index); // 一覧表示

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// API

router.post(
    '/auth',
    passport.authenticate( "local", {
        successRedirect: '/dashboard',
        failureRedirect: '/',
        failureFlash: true,
        badRequestMessage: 'ユーザー名またはパスワードが違います'
    }),
    apiController.auth
);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


module.exports = router;
